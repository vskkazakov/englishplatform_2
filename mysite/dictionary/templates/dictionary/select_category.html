<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Entertaining English - {{ title }}</title>
    <link rel="stylesheet" href="{% load static %}{% static 'dictionary/styles.css' %}?v=2.3">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <span class="logo-text">Entertaining</span><span class="logo-accent">English</span>
            </div>
            <div class="nav">
                <a href="{% url 'index' %}" class="nav-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="{% url 'dictionary:index' %}" class="nav-link">–°–ª–æ–≤–∞—Ä—å</a>
                <a href="{% url 'tests:index' %}" class="nav-link">–¢–µ—Å—Ç—ã</a>
                <a href="{% url 'act_static:index' %}" class="nav-link">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                <a href="{% url 'games:index' %}" class="nav-link">–ò–≥—Ä—ã</a>
                {% if user.is_authenticated %}
                    <span class="user-greeting">–ü—Ä–∏–≤–µ—Ç, {{ user.first_name|default:user.username }}!</span>
                    <a href="{% url 'authen:logout' %}" class="btn-login">–í—ã–π—Ç–∏</a>
                {% endif %}
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="title-accent">{{ title }}</span>
                    </h1>
                    <p class="hero-description">
                        –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–ª–æ–≤
                    </p>
                </div>
            </section>

            <!-- –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            <section class="select-category-form">
                <div class="form-container">
                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="form-section">
                            <h3 class="section-title-small">üìÅ –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                            <div class="form-group">
                                <label for="{{ form.category.id_for_label }}" class="form-label">
                                    {{ form.category.label }}
                                </label>
                                {{ form.category }}
                                {% if form.category.errors %}
                                    <div class="error-message">
                                        {{ form.category.errors.0 }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <span class="btn-icon">‚û°Ô∏è</span>
                                –ü–µ—Ä–µ–π—Ç–∏ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Å–ª–æ–≤
                            </button>
                            
                            <a href="{% url 'dictionary:create_category' %}" class="btn-secondary">
                                <span class="btn-icon">‚ûï</span>
                                –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                            </a>
                            
                            <a href="{% url 'dictionary:index' %}" class="btn-secondary">
                                <span class="btn-icon">‚¨ÖÔ∏è</span>
                                –ù–∞–∑–∞–¥ –≤ —Å–ª–æ–≤–∞—Ä—å
                            </a>
                        </div>
                    </form>
                </div>
            </section>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            {% if user_categories %}
            <section class="categories-stats">
                <h3 class="section-title-small">üìä –í–∞—à–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <div class="categories-grid">
                    {% for category in user_categories %}
                        <div class="category-stat-card">
                            <div class="category-icon">üìÅ</div>
                            <div class="category-name">{{ category|title }}</div>
                        </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            {% if messages %}
            <section class="messages-section">
                <div class="messages-container">
                    {% for message in messages %}
                        <div class="message {{ message.tags }}">
                            <div class="message-icon">
                                {% if message.tags == 'success' %}
                                    ‚úÖ
                                {% elif message.tags == 'error' %}
                                    ‚ùå
                                {% elif message.tags == 'warning' %}
                                    ‚ö†Ô∏è
                                {% else %}
                                    ‚ÑπÔ∏è
                                {% endif %}
                            </div>
                            <div class="message-content">
                                <div class="message-title">
                                    {% if message.tags == 'success' %}
                                        –£—Å–ø–µ—Ö!
                                    {% elif message.tags == 'error' %}
                                        –û—à–∏–±–∫–∞!
                                    {% elif message.tags == 'warning' %}
                                        –í–Ω–∏–º–∞–Ω–∏–µ!
                                    {% else %}
                                        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
                                    {% endif %}
                                </div>
                                <div class="message-text">{{ message }}</div>
                            </div>
                            <button class="message-close" onclick="this.parentElement.remove()">√ó</button>
                        </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Entertaining English</h4>
                    <p>–ò–∑—É—á–µ–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Å—Ç–∞–ª–æ –ø—Ä–æ—â–µ</p>
                </div>
                <div class="footer-section">
                    <h4>–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
                    <p>–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å–ª–æ–≤–∞ –ø–æ —Ç–µ–º–∞–º</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(function() {
            const messages = document.querySelectorAll('.message');
            messages.forEach(function(message) {
                message.style.opacity = '0';
                setTimeout(() => message.remove(), 300);
            });
        }, 5000);
    </script>
</body>
</html>

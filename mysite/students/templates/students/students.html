{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Entertaining English - –£—á–µ–Ω–∏–∫–∏</title>
    <link rel="stylesheet" href="{% static 'students/styles.css' %}?v=1.0">
    <script src="{% static 'students/mobile-nav.js' %}?v=1.0" defer></script>
</head>
<body>
    {% load student_filters %}
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <span class="logo-text">Entertaining</span><span class="logo-accent">English</span>
            </div>
            <div class="nav">
                <a href="{% url 'index' %}" class="nav-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="{% url 'dictionary:index' %}" class="nav-link">–°–ª–æ–≤–∞—Ä—å</a>
                <a href="{% url 'tests:index' %}" class="nav-link">–¢–µ—Å—Ç—ã</a>
                <a href="{% url 'act_static:index' %}" class="nav-link">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                <a href="{% url 'games:index' %}" class="nav-link">–ò–≥—Ä—ã</a>
                {% if user.is_authenticated %}
                    <span class="user-greeting">–ü—Ä–∏–≤–µ—Ç, {{ user.first_name|default:user.username }}!</span>
                    <a href="{% url 'authen:logout' %}" class="btn-login">–í—ã–π—Ç–∏</a>
                {% endif %}
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="title-accent">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞–º–∏</span>
                    </h1>
                    <p class="hero-description">
                        –ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –Ω–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤, —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–µ–∫—É—â–∏–º–∏ –∏ –Ω–∞–∑–Ω–∞—á–∞–π—Ç–µ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
                    </p>
                    <div class="hero-actions">
                        <button class="btn-primary add-students-btn" onclick="showAddStudentsModal()">
                            <span class="btn-icon">‚ûï</span>
                            –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–æ–≤
                        </button>
                    </div>
                </div>
            </section>

            <!-- –¢–µ–∫—É—â–∏–µ —É—á–µ–Ω–∏–∫–∏ -->
            {% if current_students %}
            <section class="students-section">
                <div class="section-header">
                    <h2>üë®‚Äçüéì –¢–µ–∫—É—â–∏–µ —É—á–µ–Ω–∏–∫–∏</h2>
                    <p class="section-description">–£—á–µ–Ω–∏–∫–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å –¥–ª—è –æ–±—É—á–µ–Ω–∏—è</p>
                </div>
                <div class="students-grid">
                    {% for relationship in current_students %}
                    <div class="student-card">
                        <div class="student-header">
                            <div class="student-avatar">
                                <span class="avatar-placeholder">{{ relationship.student.first_name|first|upper }}</span>
                            </div>
                            <div class="student-info">
                                <h3 class="student-name">{{ relationship.student.get_full_name|default:relationship.student.username }}</h3>
                                <span class="student-email">üìß {{ relationship.student.email }}</span>
                                <span class="relationship-date">üìÖ –°: {{ relationship.started_at|date:"d.m.Y" }}</span>
                                {% if relationship.notes %}
                                <span class="student-notes">üìù {{ relationship.notes|truncatechars:100 }}</span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="student-actions">
                            <button class="btn-primary" onclick="createHomework({{ relationship.student.id }}, '{{ relationship.student.get_full_name|default:relationship.student.username }}')">
                                <span class="btn-icon">üìù</span>
                                –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                            </button>
                            <a href="{% url 'students:view_homework' homework_id=0 %}?student_id={{ relationship.student.id }}" class="btn-secondary">
                                <span class="btn-icon">üìö</span>
                                –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞–Ω–∏–π
                            </a>
                            <button type="button" class="btn-secondary share-category-btn" 
                                    onclick="openShareCategoryModal({{ relationship.student.id }}, '{{ relationship.student.get_full_name|default:relationship.student.username }}')">
                                <span class="btn-icon">üìö</span>
                                –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}

            <!-- –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è -->
            {% if homework_list %}
            <section class="homework-section">
                <div class="section-header">
                    <h2>üìù –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                    <p class="section-description">–ó–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–∞–∑–Ω–∞—á–∏–ª–∏ —Å–≤–æ–∏–º —É—á–µ–Ω–∏–∫–∞–º</p>
                </div>
                <div class="homework-grid">
                    {% for homework in homework_list %}
                    <div class="homework-card">
                        <div class="homework-header">
                            <h3 class="homework-title">{{ homework.title }}</h3>
                            <span class="homework-status {% if homework.is_completed %}completed{% else %}pending{% endif %}">
                                {% if homework.is_completed %}
                                    ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
                                {% else %}
                                    ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ
                                {% endif %}
                            </span>
                        </div>
                        
                        <div class="homework-details">
                            <h4>üìã –û–ø–∏—Å–∞–Ω–∏–µ:</h4>
                            <p class="homework-description">{{ homework.description|truncatechars:150 }}</p>
                            <div class="homework-meta">
                                <span class="student-name">üë®‚Äçüéì –î–ª—è: {{ homework.student.get_full_name|default:homework.student.username }}</span>
                                <span class="due-date">‚è∞ –°—Ä–æ–∫: {{ homework.due_date|date:"d.m.Y H:i" }}</span>
                                {% if homework.is_completed %}
                                <span class="completed-date">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: {{ homework.completed_at|date:"d.m.Y H:i" }}</span>
                                {% endif %}
                            </div>
                        </div>

                        <div class="homework-actions">
                            <a href="{% url 'students:view_homework' homework_id=homework.id %}" class="btn-primary">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞–Ω–∏—è
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}

            {% if not current_students and not homework_list %}
            <section class="empty-state">
                <div class="empty-content">
                    <div class="empty-icon">üë®‚Äçüéì</div>
                    <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤</h3>
                    <p>–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ</p>
                    <div class="empty-actions">
                        <button class="btn-primary add-students-btn" onclick="showAddStudentsModal()">
                            <span class="btn-icon">‚ûï</span>
                            –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–æ–≤
                        </button>
                        <p class="empty-hint">üí° –°–æ–≤–µ—Ç: –£—á–µ–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—Ç –≤–∞—à–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —Å–º–æ–≥—É—Ç –ø—Ä–∏–Ω—è—Ç—å –∏—Ö</p>
                    </div>
                </div>
            </section>
            {% endif %}

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            {% if messages %}
            <section class="messages-section">
                <div class="messages-container">
                    {% for message in messages %}
                        <div class="message {{ message.tags }}">
                            <div class="message-icon">
                                {% if message.tags == 'success' %}
                                    ‚úÖ
                                {% elif message.tags == 'error' %}
                                    ‚ùå
                                {% elif message.tags == 'warning' %}
                                    ‚ö†Ô∏è
                                {% else %}
                                    ‚ÑπÔ∏è
                                {% endif %}
                            </div>
                            <div class="message-content">
                                <div class="message-title">
                                    {% if message.tags == 'success' %}
                                        –£—Å–ø–µ—Ö!
                                    {% elif message.tags == 'error' %}
                                        –û—à–∏–±–∫–∞!
                                    {% elif message.tags == 'warning' %}
                                        –í–Ω–∏–º–∞–Ω–∏–µ!
                                    {% else %}
                                        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
                                    {% endif %}
                                </div>
                                <div class="message-text">{{ message }}</div>
                            </div>
                            <button class="message-close" onclick="this.parentElement.remove()">√ó</button>
                        </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
    <div class="modal" id="shareCategoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π —Å–ª–æ–≤</h3>
                <button type="button" class="modal-close" onclick="closeShareCategoryModal()">&times;</button>
            </div>
            <!-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
            <form class="request-form" id="shareCategoryForm" method="POST" action="">
                {% csrf_token %}
                <div class="form-group">
                    <label class="form-label">–£—á–µ–Ω–∏–∫:</label>
                    <div id="selectedStudentName" class="form-control-static"></div>
                </div>
                <div class="form-group">
                    <label for="categorySelect" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–ª–æ–≤:</label>
                    <select id="categorySelect" name="category" class="form-control" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="shareMessage" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <textarea id="shareMessage" name="message" class="form-control" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —É—á–µ–Ω–∏–∫–∞..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeShareCategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤ -->
    <div id="addStudentsModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–æ–≤</h3>
                <button class="modal-close" onclick="closeAddStudentsModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- –ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–æ–≤ -->
                <div class="search-section">
                    <form method="get" class="search-form" id="studentSearchForm">
                        <div class="search-row">
                            <div class="search-group">
                                <input type="text" name="search_query" class="form-control" 
                                       placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email..." id="studentSearchInput">
                            </div>
                            <div class="search-group">
                                <button type="submit" class="btn-primary">
                                    <span class="btn-icon">üîç</span>
                                    –ü–æ–∏—Å–∫
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                <div class="students-list" id="studentsList">
                    <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è -->
    <div id="requestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ</h3>
                <button class="modal-close" onclick="closeRequestModal()">√ó</button>
            </div>
            <form id="requestForm" class="request-form">
                {% csrf_token %}
                <div class="form-group">
                    <label for="message" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫—É</label>
                    <textarea id="message" name="message" rows="4" class="form-control" 
                              placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, –ø–æ—á–µ–º—É –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—á–∏—Ç—å —ç—Ç–æ–≥–æ —É—á–µ–Ω–∏–∫–∞..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">
                        <span class="btn-icon">üì§</span>
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                    </button>
                    <button type="button" class="btn-secondary" onclick="closeRequestModal()">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Entertaining English</h4>
                    <p>–ò–∑—É—á–µ–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Å—Ç–∞–ª–æ –ø—Ä–æ—â–µ</p>
                </div>
                <div class="footer-section">
                    <h4>–£—á–µ–Ω–∏–∫–∏</h4>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏ –∏ —É—á–µ–Ω–∏–∫–∞–º–∏</p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        let currentStudentId = null;
        let currentStudentName = '';

        function showAddStudentsModal() {
            document.getElementById('addStudentsModal').style.display = 'flex';
            loadStudentsList();
        }

        function closeAddStudentsModal() {
            document.getElementById('addStudentsModal').style.display = 'none';
            document.getElementById('studentSearchForm').reset();
        }

        function showRequestModal(studentId, studentName) {
            currentStudentId = studentId;
            currentStudentName = studentName;
            document.getElementById('requestModal').style.display = 'flex';
        }

        function closeRequestModal() {
            document.getElementById('requestModal').style.display = 'none';
            document.getElementById('requestForm').reset();
        }

        function openShareCategoryModal(studentId, studentName) {
            currentStudentId = studentId;
            currentStudentName = studentName;
            
            document.getElementById('selectedStudentName').textContent = studentName;
            document.getElementById('shareCategoryModal').style.display = 'flex';
            
            loadTeacherCategories();
        }

        function closeShareCategoryModal() {
            document.getElementById('shareCategoryModal').style.display = 'none';
            document.getElementById('shareCategoryForm').reset();
        }

        function loadStudentsList(searchQuery = '') {
            const studentsList = document.getElementById('studentsList');
            studentsList.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤...</div>';
            
            fetch(`/students/get-students-list/?search=${searchQuery}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayStudentsList(data.students);
                    } else {
                        studentsList.innerHTML = '<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + data.error + '</div>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    studentsList.innerHTML = '<div class="error">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ</div>';
                });
        }

        function displayStudentsList(students) {
            const studentsList = document.getElementById('studentsList');
            
            if (students.length === 0) {
                studentsList.innerHTML = '<div class="no-students">–£—á–µ–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            let html = '<div class="students-grid">';
            students.forEach(student => {
                const hasRequest = student.has_request;
                const requestStatus = student.request_status;
                const isCurrentStudent = student.is_current_student;
                
                let buttonHtml = '';
                if (isCurrentStudent) {
                    buttonHtml = '<button class="btn-success" disabled><span class="btn-icon">‚úÖ</span>–£–∂–µ —É—á–µ–Ω–∏–∫</button>';
                } else if (hasRequest && requestStatus === 'pending') {
                    buttonHtml = '<button class="btn-secondary" disabled><span class="btn-icon">‚è≥</span>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</button>';
                } else if (hasRequest && (requestStatus === 'rejected' || requestStatus === 'cancelled')) {
                    buttonHtml = `<button class="btn-primary" onclick="sendRequestToStudent(${student.id}, '${student.name}')"><span class="btn-icon">üîÑ</span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ</button>`;
                } else {
                    buttonHtml = `<button class="btn-primary" onclick="sendRequestToStudent(${student.id}, '${student.name}')"><span class="btn-icon">üìù</span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</button>`;
                }
                
                html += `
                    <div class="student-card">
                        <div class="student-header">
                            <div class="student-avatar">
                                <span class="avatar-placeholder">${student.name.charAt(0).toUpperCase()}</span>
                            </div>
                            <div class="student-info">
                                <h3 class="student-name">${student.name}</h3>
                                <span class="student-email">üìß ${student.email}</span>
                            </div>
                        </div>
                        <div class="student-actions">
                            ${buttonHtml}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            studentsList.innerHTML = html;
        }

        function sendRequestToStudent(studentId, studentName) {
            currentStudentId = studentId;
            currentStudentName = studentName;
            closeAddStudentsModal();
            showRequestModal(studentId, studentName);
        }

        function createHomework(studentId, studentName) {
            window.location.href = `/students/create-homework/${studentId}/`;
        }

        function loadTeacherCategories() {
            fetch('{% url "students:get_teacher_categories" %}')
                .then(response => response.json())
                .then(data => {
                    const categorySelect = document.getElementById('categorySelect');
                    categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é...</option>';
                    
                    if (data.success) {
                        data.categories.forEach(category => {
                            const option = document.createElement('option');
                            option.value = category.id;
                            option.textContent = `${category.name} (${category.word_count} —Å–ª–æ–≤)`;
                            categorySelect.appendChild(option);
                        });
                    } else {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', data.error);
                    }
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞:', error);
                });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
        document.getElementById('shareCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            fetch(`{% url "students:share_category" student_id=0 %}`.replace('0', currentStudentId), {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert(data.message);
                    closeShareCategoryModal();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + data.error);
                }
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
            });
        });

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(function() {
            const messages = document.querySelectorAll('.message');
            messages.forEach(function(message) {
                message.style.opacity = '0';
                setTimeout(() => message.remove(), 300);
            });
        }, 5000);
    </script>
</body>
</html>